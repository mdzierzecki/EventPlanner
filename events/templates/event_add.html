{% extends 'base.html' %}
{% load static %}

{% block style %}
<link href="{% static '/assets/plugins/timepicker/bootstrap-material-datetimepicker.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
{% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <div class="alert alert-info alert-dismissible fade show" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true"><i class="mdi mdi-close"></i></span>
                </button>
                <strong>{{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <div class="alert alert-info alert-dismissible fade show" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true"><i class="mdi mdi-close"></i></span>
            </button>
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}
{% endif %}
<!-- Page Content-->
<div class="container-fluid">
   <!-- Page-Title -->
   <div class="row">
      <div class="col-sm-12">
         <div class="page-title-box">
            <div class="float-right">
               <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="{% url 'user_events_list' %}">Moje wydarzenia</a></li>
                  <li class="breadcrumb-item active">Dodaj wydarzenie</li>
               </ol>
               <!--end breadcrumb-->
            </div>
            <!--end /div-->
            <h4 class="page-title">Dodaj wydarzenie</h4>
         </div>
         <!--end page-title-box-->
      </div>
      <!--end col-->
   </div>
   <!--end row-->
   <!-- end page title end breadcrumb -->
   <div class="row">
      <div class="col-lg-12">
         <div class="card">
            <div class="card-body">
               <h4 class="mt-0 header-title">Kreator wydarzenia</h4>
               <p class="text-muted mb-3">Tutaj możesz stworzyć własne wydarzenie. Pamiętaj, że wszystkie informacje możesz potem wygodnie edytować!
               </p>
               <form method="post">
                  {% csrf_token %}
                  <div class="row">
                     <div class="col-lg-6">
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Tytuł: </label>
                           <div class="col-sm-10">
                              {{ form.title }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Miasto: </label>
                           <div class="col-sm-10">
                              {{ form.city }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Adres: </label>
                           <div class="col-sm-10">
                              {{ form.street }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Opis: </label>
                           <div class="col-sm-10">
                              {{ form.description }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Kontakt: </label>
                           <div class="col-sm-10">
                              {{ form.contact_description }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Data: </label>
                           <div class="col-sm-10">
                              {{ form.date }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Godzina: </label>
                           <div class="col-sm-10">
                              {{ form.time }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Status wydarzenia: </label>
                           <div class="col-sm-10">
                              {{ form.event_status }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Facebook: </label>
                           <div class="col-sm-10">
                              {{ form.facebook }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right">Strona internetowa: </label>
                           <div class="col-sm-10">
                              {{ form.website }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right"></label>
                           <div class="custom-control custom-switch">
                              {{ form.if_additional_field }}
                              <label class="custom-control-label" for="id_if_additional_field">Dodatkowe pytanie do uczestników</label>
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right"></label>
                           <div class="col-sm-10"  id="additional_field_div">
                              {{ form.additional_field }}
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right"></label>
                           <div class="custom-control custom-switch">
                              {{ form.if_participants_limit }}
                              <label class="custom-control-label" for="id_if_participants_limit">Limit uczestników wydarzenia</label>
                           </div>
                        </div>
                        <div class="form-group row">
                           <label class="col-sm-2 col-form-label text-right"></label>
                           <div class="col-sm-10"  id="participants_limit_div">
                              {{ form.participants_limit }}
                           </div>
                        </div>
                        <button type="submit" class="btn btn-primary px-5 py-2">Dodaj wydarzenie</button>
                     </div>
                  </div>
               </form>
            </div>
         </div>
         <!--end card-body-->
      </div>
      <!--end card-->
   </div>
   <!--end col-->
</div>
<!--end row-->
</div>
{% endblock %}

{% block scripts %}
<script src="{% static '/assets/plugins/moment/moment.js' %}"></script>
<script src="{% static '/assets/plugins/daterangepicker/daterangepicker.js' %}"></script>
<script src="{% static '/assets/plugins/select2/select2.min.js' %}"></script>
<script src="{% static '/assets/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js' %}"></script>
<script src="{% static '/assets/plugins/timepicker/bootstrap-material-datetimepicker.js' %}"></script>
<script src="{% static '/assets/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js' %}"></script>
<script src="{% static '/assets/plugins/bootstrap-touchspin/js/jquery.bootstrap-touchspin.min.js' %}"></script>

<script src="{% static '/assets/pages/jquery.forms-advanced.js' %}"></script>

<script src="{% static '/ckeditor/ckeditor-init.js' %}"></script>
<script src="{% static '/ckeditor/ckeditor/ckeditor.js' %}"></script>

<script>
   document.addEventListener('DOMContentLoaded', function () {
     var checkbox_additional_field = document.getElementById('id_if_additional_field');
     var checkbox_participants_limit = document.getElementById('id_if_participants_limit');
     var additional_field = document.getElementById('additional_field_div');
     var participants_limit = document.getElementById('participants_limit_div');

     additional_field.style.display = 'none';
     participants_limit.style.display = 'none';

     if (checkbox_additional_field.checked) {
         additional_field.style.display = 'block';
       } else {
         additional_field.style.display = 'none';
       }

     if (checkbox_participants_limit.checked) {
         participants_limit.style.display = 'block';
       } else {
         participants_limit.style.display = 'none';
       }

     checkbox_additional_field.addEventListener('change', function () {
       if (checkbox_additional_field.checked) {
         additional_field.style.display = 'block';
       } else {
         additional_field.style.display = 'none';
       }
     });

     checkbox_participants_limit.addEventListener('change', function () {
       if (checkbox_participants_limit.checked) {
         participants_limit.style.display = 'block';
       } else {
         participants_limit.style.display = 'none';
       }
     });

   });
</script>

{% endblock %}